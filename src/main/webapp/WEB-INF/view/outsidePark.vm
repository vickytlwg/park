<script src="/park/script/outsidePark.js?v=1.4"></script>
<script src="/park/script/service/textModalService.js"></script>
<script src="/park/script/outsideParkAngular.js" type="text/javascript"></script>
<script src="https://use.fontawesome.com/a416e9e97f.js"></script>

<style>
.form-group label {
	float:right;
}</style>
<div class="content-wrapper">
	<section class="content-header">
		<h1>
			停车场管理 <small style="padding-left: 15px"><a
				href="/park/zoneCenter"> 市</a></small><small style="padding-left: 15px"><a
				href="/park/area">区</a></small><small style="padding-left: 15px"><a
				href="/park/street">路段</a></small>
		</h1>
	</section>
	<section class="content">
		<div class="row">
			<div class="col-md-12" style="padding: 0 5px 0 5px;">
				<div class="box">
					<div class="box-header">
						<h3 class="box-title"></h3>
					</div>
					<!-- /.box-header -->
					<div class="box-body" style="padding: 0px;">
						<div class="btn-group" style="margin-left: 10px;">
							<button #if(!$isAdmin) disabled#end id="refresh" type="button"
								class="btn btn-info"
								style="border-radius: 25px; margin-right: 5px;">
								<span class="glyphicon glyphicon-refresh"></span> 刷新
							</button>
							<button #if(!$isAdmin) disabled#end id='addPark' type="button"
								class="btn btn-primary"
								style="border-radius: 25px; margin-right: 5px;">
								<span class="glyphicon glyphicon-pencil"></span> 增加
							</button>
							<button #if(!$isAdmin) disabled#end id='updatePark' type="button"
								class="btn btn-danger"
								style="border-radius: 25px; margin-right: 5px;">
								<span class="glyphicon glyphicon-edit"></span> 更改
							</button>
							<button #if(!$isAdmin) disabled#end id='deletePark' type="button"
								class="btn btn-warning"
								style="border-radius: 25px; margin-right: 5px;">
								<span class="glyphicon glyphicon-remove"></span> 删除
							</button>
							<button #if(!$isAdmin) disabled#end id='uploadPic' type="button"
								class="btn btn-success"
								style="border-radius: 25px; margin-right: 5px;">
								<span class="fa fa-cloud-upload"></span>上传图片
							</button>
							<button #if(!$isAdmin) disabled#end id='authoritySet'
								type="button" class="btn bg-maroon"
								style="border-radius: 25px; margin-right: 5px;">
								<span class="fa fa-user-o"></span> 权限设置
							</button>
							<button #if(!$isAdmin) disabled#end id='textSet'
								ng-click="textShowSet()" type="button" class="btn btn-primary"
								style="border-radius: 25px; margin-right: 5px;">
								<span class="fa fa-magic"></span>文字设置
							</button>

						</div>
						<div class="pull-right" style="width: 300px">
							<div class="input-group">
								<div class="row">
									<div class="col-md-9 ">
										<input type="text" class="form-control" id="searchContent"
											style="    height:30px;font-size: 16px;">

									</div>
									<div class="col-md-3" style="margin-left: -15px;">
										<span class="input-group-btn">
											<button class="btn btn-default btn-sm" type="button"
												id="searchButton">搜索</button>
										</span>

									</div>

								</div>
							</div>
							<!-- /input-group -->
						</div>


						<br /> <br />
						<div>
							<table
								class="table table-bordered table-striped table-hover table-condensed text-center"
								id='parkTable' style="font-size: 12px;">
								<tr class="info" style="height: 30px; line-height: 30px;">
									<th><span style=""><input type="checkbox" /></span></th>
									<th><span>Id</span></th>
									<th><span>名称</span></th>
									<th><span>所属街道</span></th>
									<!-- 										<th><span>进出口数</span></th>
 -->
									<th><span>车位数</span></th>
									<th><span>剩余车位</span></th>
									<th><span>计费标准</span></th>
									<th><span>状态</span></th>
									<!-- 										<th><span>免费</span></th>
 -->
									<th><span>类型</span></th>
									<!-- 										<th><span>位置</span></th>
 -->
									<th><span>日期</span></th>
									<th><span>图片</span></th>
									<th style="width: 80px;"><span>操作</span></th>
								</tr>

								<tbody id="parkBody"></tbody>
							</table>
						</div>
					</div>
					<div class="box-footer clearfix">
						<div id='pagination'></div>
					</div>
				</div>
			</div>
		</div>

	</section>

</div>

<!-- <style>
label {
	float: right;
}
</style> -->

<div class="modal fade" id="searchParkByLocation" tabindex="1"
	role="dialog" aria-labelledby='searchParkLoction' aria-hidden='true'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header'>
				<button type='button' class='close' data-dismiss='modal'
					aria-hidden='true'>&times;</button>
				<h4 class='modal-title' id='addMacLabel'>查找停车场</h4>
			</div>
			<div class='modal-body' style="padding-bottom: 0px;">

				<form class='form-horizontal' id='searchMacForm' role='form'>
					<div class='form-group'>
						<label class='col-sm-2 control-label' for='Tt'>位置</label>
						<div class='col-sm-8'>
							<input type='text' class='form-control' id='locationKeyWords'
								placeholder='地址关键字'>
						</div>
					</div>
				</form>
			</div>
			<div class="addMacResult"></div>
			<div class='modal-footer'>
				<button type='button' class='btn btn-default' data-dismiss='modal'>关闭</button>
				<button id="submitSearchParkBtn" type='button'
					class='btn btn-primary'>查找</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="addParkModal" tabindex="-1" role="dialog"
	aria-labelledby='addParkLabel' aria-hidden='true'>
	<div class='modal-dialog' style="min-width: 800px; min-height: 1200px"
		ng-app="outsideParkApp" ng-controller="outsideParkCtrl">
		<div class='modal-content'>

			<div class='modal-header'>
				<button type='button' class='close' data-dismiss='modal'
					aria-hidden='true' ng-click="clearPosition()">&times;</button>
				<h3 class='modal-title text-center' id='addParkLabel'>收费站点信息</h3>
			</div>
			<div class='modal-body '>
				<form class='form-horizontal' id='addParkForm' role='form'>

					<div class="panel panel-info">
						<div class="panel-heading">
							<h3 class="panel-title">基本信息</h3>
						</div>
						<div class="panel-body">
							<div class='form-group'>
								<div class="col-sm-1">
									<label class='control-label' for='parkName'>名称 *</label>
								</div>
								<div class='col-sm-2'>
									<input type='text' class='form-control' id='parkName'
										placeholder='请输入名称'>
								</div>
								<div class="col-sm-1" style="padding-right: 0;">
									<label class=' control-label' for='portCount'>车位数 *</label>
								</div>
								<div class='col-sm-2'>
									<input type='text' class='form-control' id='portCount'
										placeholder='请输入车位数'>
								</div>
								<div class="col-sm-1 ">
									<label style="display: none" class='control-label'
										style="float:right" for='channelCount'>进出口数</label> <label
										class='control-label' for='parkType'>类型</label>
								</div>
								<div class='col-sm-2'>
									<input style="display: none" type='text' class='form-control'
										id='channelCount' placeholder='请输入进出口数'> <select
										class='form-control' id='parkType'>
										<option value=3>路内停车场</option>
										<option value=4>充电桩</option>
										<option value=2>其它</option>
									</select>
								</div>

							</div>

							<div class='form-group' style="margin-bottom: 0px;">


								<div class="col-sm-1" style="padding: 0px;">
									<label class=' control-label' for='leftPortCount'>剩余车位</label>
								</div>
								<div class='col-sm-2'>
									<input type='text' class='form-control' id='leftPortCount'
										placeholder='请输入剩余车位数'>
								</div>
								<div class="col-sm-1" style="padding: 0px;">
									<label class='control-label' for='feeCriterion'>计费标准</label>
								</div>
								<div class='col-sm-2'>
									<select class='form-control' id='feeCriterion'></select>
								</div>
								<div class="col-sm-1" style="padding: 0px;">
									<label class='control-label'>是否免费</label>
								</div>
								<div class='col-sm-2'>
									<div class='checkbox' style="float:left;">
										<label><input type='checkbox' id='isFree'>免费 </label>
									</div>
								</div>
							</div>
						</div>
					</div>


					<div class="panel panel-success">
						<div class="panel-heading">
							<h3 class="panel-title">附加信息</h3>
						</div>
						<div class="panel-body">
							<div>
								<div class='form-group'>
									<div class="col-sm-1 ">
										<label class='control-label' for='contact'>联系人</label>
									</div>
									<div class='col-sm-2'>
										<input type='text' class='form-control' id='contact'
											placeholder='联系人'>
									</div>
									<div class="col-sm-1 ">
										<label class='control-label' for='number'>电话</label>
									</div>
									<div class='col-sm-2'>
										<input type='text' class='form-control' id='number'
											placeholder='联系人电话'>
									</div>
									<div class="col-sm-1 ">
										<label class='control-label' for='longitude'>经度</label>
									</div>
									<div class='col-sm-2'>
										<input type='text' class='form-control' id='longitude'
											placeholder='请输入停车场经度'>
									</div>
									<div class="col-sm-1 ">
										<label class='control-label' for='latitude'>纬度</label>
									</div>
									<div class='col-sm-2'>
										<input type='text' class='form-control' id='latitude'
											placeholder='请输入停车场纬度'>
									</div>
								</div>
								<div class='form-group'>
									<div class="col-sm-1 " style="padding: 0px;">
										<label class='control-label'>图片地址</label>
									</div>
									<div class='col-sm-5'>
										<input type='text' class='form-control' id='mapAddr'
											placeholder='请输入停车场地图地址'>
									</div>
									<div class="col-sm-1 " style="padding: 0px;">
										<label class='control-label' for='number'>功能属性</label>
									</div>
									<div class='col-sm-5'>
										<input type='text' class='form-control' id='description'
											placeholder='特性描述'>
									</div>
								</div>

								<!-- 							<div class='form-group'>
								<div class="col-sm-2 ">
									<label class='control-label' for='status'>状态</label>
								</div>
								<div class='col-sm-4'>
									<select class='form-control' id='parkStatus'>
										<option value=0>可用</option>
										<option value=1>不可用</option>
									</select>
								</div>
							</div> -->

								<!-- 							<div class='form-group'></div>
 -->

							</div>

						</div>
					</div>
					<div class="panel panel-warning" style="margin-bottom: 0;">
						<div class="panel-heading">
							<h3 class="panel-title" style="display: inline;">隶属信息 *</h3>
							<!-- 							<label class='control-label'>是否更改</label>
 -->
							<div class='checkbox' style="display: inline;">
								<label> <input type="checkbox" id="isPositionChange"
									ng-model="isPositionChange"> 更改隶属收费信息 *</input>
								</label>
							</div>
						</div>
						<div class="panel-body">
							<div class='form-group'>

								<div class="col-sm-1" style="padding: 0;">
									<label class='control-label'>市 *</label>
								</div>
								<div class='col-sm-2'>
									<select id="zoneCenterId" class="form-control"
										ng-disabled="!isPositionChange"
										ng-options="zoneCenter.id as zoneCenter.name for zoneCenter in zoneCenters"
										ng-model="zoneCenterId" ng-change="getAreas()"></select>
								</div>
								<div class="col-sm-1 ">
									<label class='control-label'>区 *</label>
								</div>
								<div class='col-sm-2'>
									<select id="areaId" class="form-control"
										ng-disabled="!isPositionChange"
										ng-options="area.id as area.name for area in areas"
										ng-model="areaId" ng-change="getStreets()"></select>
								</div>
								<div class="col-sm-1 ">
									<label class='control-label'>路段 *</label> <input hidden
										id="tmpStreetId" type='text'></input>
								</div>
								<div class='col-sm-2'>
									<select id="streetid" class="form-control"
										ng-disabled="!isPositionChange"
										ng-options="street.id as street.name for street in streets"
										ng-model="streetid" ng-change="streetIdChange()"></select>
								</div>
							</div>
						</div>
					</div>


					<!-- 					<div id='addParkResult'></div>
 -->
				</form>

			</div>

			<div class='modal-footer'>
				<button type='button' class='btn btn-default' id="modalCloseBtn"
					data-dismiss='modal' ng-click="clearPosition()">关闭</button>
				<button id="submitParkBtn" type='button' class='btn btn-primary'>提交</button>
			</div>

		</div>
	</div>
</div>


<div class="modal fade" id="uploadParkPic" tabindex="-1" role="dialog"
	aria-labelledby='uploadParkPicLabel' aria-hidden='true'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header'>
				<button type='button' class='close' data-dismiss='modal'
					aria-hidden='true'>&times;</button>
				<h3 class='modal-title text-center' id='uploadParkPicLabel'>上传停车场图片</h3>
			</div>
			<div class='modal-body'>
				<form></form>
				<form method='post' class='form-horizontal' role='form'
					id="pictureForm" action="/park/upload/parkPic"
					enctype="multipart/form-data">
					<div class='form-group'>
						<input name="parkId" type="hidden" id="parkId" /> <label
							class='col-sm-3 control-label' for='picture'>停车场图片</label>
						<div class='col-sm-6'>
							<input type='file' name="picture" class='form-control'
								id='picture' />
						</div>
					</div>
				</form>
			</div>

			<div class='modal-footer'>
				<button type='button' class='btn btn-default' data-dismiss='modal'>关闭</button>
				<button id="submitPicBtn" type='button' class='btn btn-primary'>提交</button>
			</div>
		</div>
	</div>
</div>


<div class="modal fade" tabindex="-1" id="parkAuthoritySet"
	style="min-width: 900px" role="dialog"
	aria-labelledby='uploadParkPicLabel' aria-hidden='true'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header'>
				<button type='button' class='close' data-dismiss='modal'
					aria-hidden='true'>&times;</button>
				<h3 class='modal-title text-center'>停车场权限设置</h3>
			</div>
			<div class='modal-body'>
				<div class="panel panel-success">
					<div class="panel-heading">
						<h3 class="panel-title">道闸入口允许同行</h3>
					</div>
					<div class="panel-body">

						<div class='col-sm-12'>
							<div class='col-sm-2'>
								<div class='checkbox'>
									<label id="month1label" style="display: none"> </label> <label
										style="float: left;"> <input type='checkbox'
										id='month1'>月卡</input>
									</label>
								</div>
							</div>
							<div class='col-sm-3'>
								<div class='checkbox'>
									<label id="month0label" style="display: none"> </label> <label
										style="float: left;"> <input type='checkbox'
										id='month1expire'>月卡过期</input>
									</label>
								</div>
							</div>
							<div class='col-sm-2'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='temporary1'>临停</input>
									</label>
								</div>
							</div>
							<div class='col-sm-1'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='typeA1'>tA</input>
									</label>
								</div>
							</div>
							<div class='col-sm-1'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='typeB1'>tB</input>
									</label>
								</div>
							</div>
							<div class='col-sm-1'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='typeC1'>tC</input>
									</label>
								</div>
							</div>
							<div class='col-sm-1'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='typeD1'>tD</input>
									</label>
								</div>
							</div>
						</div>
					</div>
				</div>


				<div class="panel panel-info">
					<div class="panel-heading">
						<h3 class="panel-title">道闸出口允许同行</h3>
					</div>
					<div class="panel-body">

						<div class='col-sm-12'>
							<div class='col-sm-2'>
								<div class='checkbox'>
									<label id="month0label" style="display: none"> </label> <label
										style="float: left;"> <input type='checkbox'
										id='month0'>月卡</input>
									</label>
								</div>
							</div>
							<div class='col-sm-3'>
								<div class='checkbox'>
									<label id="month0label" style="display: none"> </label> <label
										style="float: left;"> <input type='checkbox'
										id='month0expire'>月卡过期</input>
									</label>
								</div>
							</div>
							<div class='col-sm-2'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='temporary0'>临停</input>
									</label>
								</div>
							</div>
							<div class='col-sm-1'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='typeA0'>tA</input>
									</label>
								</div>
							</div>
							<div class='col-sm-1'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='typeB0'>tB</input>
									</label>
								</div>
							</div>
							<div class='col-sm-1'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='typeC0'>tC</input>
									</label>
								</div>
							</div>
							<div class='col-sm-1'>
								<div class='checkbox'>
									<label style="float: left;"> <input type='checkbox'
										id='typeD0'>tD</input>
									</label>
								</div>
							</div>
						</div>
					</div>

				</div>

				<div class='modal-footer'>
					<button type='button' class='btn btn-default' data-dismiss='modal'>关闭</button>
					<button id="submitAuthorityBtn" type='button'
						class='btn btn-primary'>提交</button>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="showTextSet" tabindex="-1" role="dialog"
	aria-labelledby='uploadParkPicLabel' aria-hidden='true'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header'>
				<button type='button' class='close' data-dismiss='modal'
					aria-hidden='true'>&times;</button>
				<h3 class='modal-title text-center'>道闸文字显示设置</h3>
			</div>
			<div class='modal-body'>
				<div class="panel panel-success">
					<div class="panel-heading">
						<h3 class="panel-title">道闸入口文字</h3>
					</div>
					<div class="panel-body">
						<div class='form-group row'>
							<div class="col-sm-2 " style="padding-top: 10px">
								<label class='control-label'>第一行</label>
							</div>
							<div class='col-sm-3'>
								<input type='text' class='form-control' id='text11'
									placeholder='第一行'>
							</div>
							<div class="col-sm-2 " style="padding-top: 10px">
								<label class='control-label'>第二行</label>
							</div>
							<div class='col-sm-3'>
								<label id="textshow1label" style="display: none"></label> <input
									type='text' class='form-control' id='text12' placeholder='第二行'>
							</div>
						</div>
						<div class='form-group row' style="padding-top: 10px">
							<div class="col-sm-2 " style="padding-top: 10px">
								<label class='control-label' for='contact'>第三行</label>
							</div>
							<div class='col-sm-3'>
								<input type='text' class='form-control' id='text13'
									placeholder='第三行'>
							</div>
							<div class="col-sm-2 " style="padding-top: 10px">
								<label class='control-label' for='number'>第四行</label>
							</div>
							<div class='col-sm-3'>
								<input type='text' class='form-control' id='text14'
									placeholder='第四行'>
							</div>
						</div>

					</div>
				</div>
				<div class="panel panel-info">
					<div class="panel-heading">
						<h3 class="panel-title">道闸出口文字</h3>
					</div>
					<div class="panel-body">
						<div class='form-group row'>
							<div class="col-sm-2 " style="padding-top: 10px">
								<label class='control-label'>第一行</label>
							</div>
							<div class='col-sm-3'>
								<label id="textshow0label" style="display: none"></label> <input
									type='text' class='form-control' id='text01' placeholder='第一行'>
							</div>
							<div class="col-sm-2 " style="padding-top: 10px">
								<label class='control-label'>第二行</label>
							</div>
							<div class='col-sm-3'>
								<input type='text' class='form-control' id='text02'
									placeholder='第二行'>
							</div>
						</div>

						<div class='form-group row' style="margin-top: 10px">
							<div class="col-sm-2 " style="padding-top: 10px">
								<label class='control-label' for='contact'>第三行</label>
							</div>
							<div class='col-sm-3'>
								<input type='text' class='form-control' id='text03'
									placeholder='第三行'>
							</div>
							<div class="col-sm-2 " style="padding-top: 10px">
								<label class='control-label' for='number'>第四行</label>
							</div>
							<div class='col-sm-3'>
								<input type='text' class='form-control' id='text04'
									placeholder='第四行'>
							</div>
						</div>

					</div>
				</div>
			</div>

			<div class='modal-footer'>
				<button type='button' class='btn btn-default' data-dismiss='modal'>关闭</button>
				<button id="submitTextShowBtn" type='button' class='btn btn-primary'>提交</button>
			</div>
		</div>
	</div>
</div>

<div id='showMessage'></div>

<div id='showErrorMessage'></div>

<div id='showPicture'></div>

<script>
	$(document).ready(function() {
		$.fn.park.initial();
	});
</script>