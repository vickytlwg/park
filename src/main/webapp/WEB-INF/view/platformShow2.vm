
<link href="/park/css/xx_list.css" rel="stylesheet" />
<link href="/park/css/xx_pname.css" rel="stylesheet" />
<link href="/park/css/smallbox.css" rel="stylesheet" />
<script type="text/javascript"
	src="http://api.map.baidu.com/api?v=2.0&ak=c7A2jm3enN7T0s5V8QbDHx85"></script>
<script type="text/javascript"
	src="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>
<script type="text/javascript"
	src="http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js"></script>
<script type="text/javascript"
	src="http://echarts.baidu.com/build/dist/echarts-all.js"></script>
<script type="text/javascript"
	src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
<script type="text/javascript" src="/park/script/utility.js"></script>

<script type="text/javascript"
	src="/park/script/platformshow2angular.js"></script>
<script type="text/javascript" src="/park/script/map2.js"></script>
<div class="content-wrapper">
	<section class="content-header">
		<h1>云平台</h1>
	</section>
	<section class="content" ng-app="parkBigDataApp">
		<div class="row">
			<div class="col-md-12">
				<div class="box">
					<div class="box-body" style="height: 630px; padding: 8px;">
						<div class="row" ng-controller="getdataCtrl">
							<div class="col-lg-3 col-md-3">
								<div class="small-box"
									style="background-color: #f5f3f0; height: 200px; margin-top: 0px;">
									<div class="row" style="padding-top: 10px;">
										<div class="col-xs-4 img-responsive">
											<img src="dist/img/money.png"
												style="margin: 10px 0 5px 35px;" />
										</div>
										<div class="col-xs-8">
											<p>今日交易金额</p>
											<h3 style="margin-bottom: 0px;">
												{{dayAmountMoney}} <small>元</small>
											</h3>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-4 img-responsive">
											<img src="dist/img/list.png" style="margin: 10px 0 5px 35px;" />
										</div>
										<div class="col-xs-8">
											<p>今日订单数</p>
											<h3 style="margin-bottom: 0px;">
												{{dayOutCount}} <small>笔</small>
											</h3>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-4 img-responsive">
											<img src="dist/img/park.png" style="margin: 10px 0 5px 35px;" />
										</div>
										<div class="col-xs-8">
											<p>在线停车场</p>
											<h3 style="margin-bottom: 0px;">
												{{dayParkCount}} <small>个</small>
											</h3>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-4 img-responsive">
											<img src="dist/img/car.png" style="margin: 10px 0 5px 35px;" />
										</div>
										<div class="col-xs-8">
											<p>在线泊位数</p>
											<h3 style="margin-bottom: 0px;">
												{{dayCarportCount}} <small>个</small>
											</h3>
										</div>
									</div>
								</div>
							</div>
							<section class="col-lg-9 col-md-9 connectedSortable"
								style="margin-left: -10px;height:400px;">
								<div
									style="min-width: 850px; height: 400px; margin-bottom: 20px; box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1)">
									<div class="iframe" id="container7"
										style="width: 100%; height: 100%; position: relative; border-radius: 5px; box-shadow: 1px 1px 1px #aaaaaa;"></div>
								</div>
							</section>
						</div>

						<div class="row">
							<div class="col-lg-3 col-md-3" style="margin: -190px 0 0 -5px;">
								<section class="connectedSortable">
									<div id="container6" style="height: 230px; min-width: 280px;"></div>
								</section>
								<section class="connectedSortable">
									<div class="chart-responsive">
										<div id="container5"
											style="height: 180px; min-width: 280px; margin-top: -20px;"></div>
									</div>
								</section>
							</div>
							<div class="col-lg-9 col-md-9" ng-controller="parkBigDataCtrl" style="padding:0 20px 0 10px;">
								<div class="panel panel-default" style="min-width: 850px;height:210px;">
									<div class="panel-heading">
										<h3 class="panel-title">停车场实时数据</h3>
									</div>
									<div class="panel-body" style="padding:0;">
											<table
												class="table table-primary table-hover table-striped table-condensed text-center"
												style="font-size: 12px;">
												<tr>
													<th><span>车牌号</span></th>
													<th><span>车位号</span></th>
													<th><span>动作</span></th>
													<th><span>时间</span></th>
													<th><span>是否收费</span></th>
													<th><span>费用</span></th>
													<th><span>停车场</span></th>
												</tr>
												<tr ng-repeat="item in items" ng-class="[item.isNew]">
													<td ng-bind="item.cardNumber"></td>
													<td ng-bind="item.portNumber"></td>
													<td ng-if="item.exitDate==undefined">入场</td>
													<td ng-if="item.exitDate!=undefined">出场</td>
													<td ng-if="item.exitDate==undefined"
														ng-bind="item.entranceDate"></td>
													<td ng-if="item.exitDate!=undefined"
														ng-bind="item.exitDate"></td>
													<td ng-if="item.paidCompleted==true" class="success">已收费</td>
													<td ng-if="item.paidCompleted==false" class="warning">未收费</td>
													<td ng-if="item.paidCompleted==true" class="warning">收费:￥{{item.chargeMoney}}</td>
													<td ng-if="item.paidCompleted==false">计费:￥{{item.chargeMoney}}</td>
													<td ng-bind="item.parkDesc"></td>
												</tr>

											</table>

										</div>
								</div>
							</div>


						</div>

					</div>

				</div>
			</div>
		</div>






	</section>

</div>
<div id='showMessage'></div>

<div id='showErrorMessage'></div>

<div id='showPicture'></div>



<script type="text/javascript">
	// 基于准备好的dom，初始化echarts实例
	var myChart = echarts.init(document.getElementById('container5'));

	// 指定图表的配置项和数据
	var option = {
		/* 		baseOption : 
		 { */
		title : {
			text : '近七日交易额/千元',
			textStyle : {
				color : '#999',
				fontWeight : 'normal'
			}
		},
		tooltip : {
			trigger : 'axis'
		},
		grid : 
		{
			x: '4%',
			y: '0%', 
			width: '90%', 
			height: '86%',
			borderWidth : 0
		},
		/* 		toolbox : {
		 show : true,
		 feature : {
		 mark : {
		 show : false
		 },
		 dataView : {
		 show : true,
		 readOnly : false
		 },
		 magicType : {
		 show : true,
		 type : [ 'line', 'bar']
		 },
		 restore : {
		 show : false
		 },
		 saveAsImage : {
		 show : true
		 }
		 }
		 }, */
		calculable : true,
		
		xAxis : [ {
			type : 'category',
			boundaryGap : false,
			splitLine : {
				show : false
			},
			data : [ '周一', '周二', '周三', '周四', '周五', '周六', '周日' ]
		} ],
		yAxis : [ {
			//						name: '交易额/千元',
			type : 'value',
			position : 'left',
			splitLine : {
				show : false
			},
			min : 0,
			max : 5,
			axisLabel : {
				formatter : '{value} '
			},
			axisLine : {
				lineStyle : {
					type : 'solid',
					color : '#999', //左边线的颜色
					width : '0', //坐标线的宽度
				}
			}
		} ],
		series : [ {
			name : '交易额',
			type : 'line',
			smooth : true,
			itemStyle : {
				normal : {
					color : '#FF9999',
					areaStyle : {
						type : {
							color : '#FF6666'
						}
					}
				}
			},
			data : [ 2.600, 2.300, 2.581, 3.546, 3.214, 4.536, 4.564 ]
		}, {
			name : '订单数',
			type : 'line',
			smooth : true,
			itemStyle : {
				normal : {
					color : '#FFCC99',
					areaStyle : {
						color : '#FF9900'
					}
				}
			},
			data : [ 1.600, 1.300, 1.581, 2.546, 2.214, 2.536, 3.564 ]
		}

		]

	/* 	} */

	/* media: [{
		query: {
			maxWidth: 980 // 当容器宽度小于980 时。
		},
		option: {
			
			left:'center'
		}
	}] */

	};
	// 使用刚指定的配置项和数据显示图表。
	myChart.setOption(option);
</script>

<script type="text/javascript">
	// 基于准备好的dom，初始化echarts实例
	var myChart = echarts.init(document.getElementById('container6'));

	// 指定图表的配置项和数据
	var option = {
		backgroundColor : '#fff',

		title : {
			text : '支付渠道占比',
			left : 'center',
			top : 20,
			padding : 5,
			textStyle : {
				color : '#999',
				fontWeight : 'normal'
			}
		},

		tooltip : {
			trigger : 'item',
			formatter : "{a} <br/>{b} : {c} ({d}%)"
		},

		visualMap : {
			show : false,
			min : 80,
			max : 600,
			inRange : {
				colorLightness : [ 0, 1 ]
			}
		},
		series : [ {
			name : '支付渠道',
			type : 'pie',
			radius : '55%',
			center : [ '50%', '50%' ],
			data : [ {
				value : 335,
				name : '支付宝',

			}, {
				value : 310,
				name : '微信'
			}, {
				value : 274,
				name : '银行卡'
			}, {
				value : 235,
				name : 'POS机'
			}, {
				value : 400,
				name : '其它'
			} ].sort(function(a, b) {
				return a.value - b.value;
			}),
			roseType : 'radius',
			label : {
				normal : {
					show:true,
					position: 'inside',
/* 					textStyle : {
						color : 'rgba(255, 255, 255, 0.3)'
					} */
				}
			},
/* 			labelLine : {
				normal : {
					lineStyle : {
						color : 'rgba(255, 255, 255, 0.3)'
					},
					smooth : false,
					length : 1,
					length2 : 1
				}
			}, */
			itemStyle : {
				normal : {
					shadowBlur : 200,
					shadowColor : 'rgba(0, 0, 0, 0.5)'
				}
			},

			animationType : 'scale',
			animationEasing : 'elasticOut',
			animationDelay : function(idx) {
				return Math.random() * 200;
			}
		} ]
	};

	// 使用刚指定的配置项和数据显示图表。
	myChart.setOption(option);
</script>


<script type="text/javascript">
	
</script>


<script>
	$(function() {
		$.fn.map.initial();
		//	$.fn.platformShow.initial();

	});
</script>

