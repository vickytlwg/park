<script src="/park/script/service/textModalService.js"></script>

<script src="/park/script/feeCriterion.js?v=1.0"></script>



<div class="content-wrapper" ng-app="feeCriterionApp" ng-controller="feeCriterionCtrl">
	<section class="content-header">
          <h1>
            收费标准管理
            <small></small>
          </h1>     
    </section>
    <section class="content">
       <div class="row">
            <div class="col-xs-12">
              	<div class="box">
	                <div class="box-header">
	                  <h3 class="box-title"></h3>
	                </div><!-- /.box-header -->
	                <div class="box-body">  
		                	<div class="btn-group">
		                		<button #if(!$isAdmin) disabled#end ng-click="criterion.refresh()" type="button" class="btn bg-purple"><span class="glyphicon glyphicon-refresh"></span> 刷新</button>
		                		<button #if(!$isAdmin) disabled#end ng-click="criterion.insert()" type="button" class="btn bg-olive"><span class="glyphicon glyphicon-pencil"></span> 添加收费标准</button>
		                		<button #if(!$isAdmin) disabled#end ng-click="criterion.update()" type="button" class="btn bg-navy"><span class="glyphicon glyphicon-edit"></span> 更新收费标准</button>
		                		<button #if(!$isAdmin) disabled#end ng-click="criterion.remove()" type="button" class="btn  bg-orange"><span class="glyphicon glyphicon-remove"></span> 删除收费标准</button>
		                	</div>
                	
	                	<br/>   
	                    <br/> 
						<div>
						 <table class="table table-hover  table-condensed" id='channelTable' style="font-size:12px">
				            <tr>				            
				             <th><span style=""><input type="checkbox" /></div></th>
									<th><span >Id</div></th>		
									<th><span>名称</div></th>
									<th><span >免费时段/分</div></th>
									<th><span >阶段1范围/分</div></th>
									<th><span >阶段2范围/分</div></th>
									<th><span >计费单位 /分</div></th>
									<th><span >阶段1小车计费标准 /元</div></th>
									<th><span >阶段2小车计费标准/元</div></th>
									<th><span >阶段1大车计费标准/元</div></th>
									<th><span >阶段2大车计费标准/元</div></th>
									<th><span>最高收费/元</div></th>
									<th><span>夜间时段</div></th>
									<th><span>是否按次收费</div></th>
									<th><span>价格/次</div></th>
									<th><span>收费说明</div></th>
				            </tr>
				          <tbody id="channelBody"></tbody>
				          	<tr  ng-repeat = "item in criterion.items">
				          		<td ><input type="checkbox" ng-model="item.checked" ng-click="criterion.checked($index)"/></td>
				          		<td ng-bind="item.id"></td>
				          		<td ng-bind="item.name"></td>
				          		<td ng-bind="item.freemins"></td>
				          		<td ng-bind="item.step1capacity"></td>
				          		<td ng-bind="item.step2capacity"></td>
								<td ng-bind="item.timeoutpriceinterval"></td>
				          		<td ng-bind="item.step1price"></td>
								<td ng-bind="item.step2price"></td>
				          		<td ng-bind="item.step1pricelarge"></td>
				          		<td ng-bind="item.step2pricelarge"></td>
				          		<td ng-bind="item.maxexpense"></td>
				          		<td ng-bind="item.nightstarttime + '--' + item.nightendtime"></td>
				          		<td>
				          			<span ng-if="item.isonetimeexpense == 0">否</span>
				          			<span ng-if="item.isonetimeexpense == 1">是</span>
				          		</td>
				          		<td ng-bind="item.onetimeexpense"></td>
								<td ng-bind="item.explaination|limitTo:45"></td>
				          </table>
    					</div>
    				</div>

<script  type="text/ng-template" id="modifyFeeCriterion">
<div class='modal-content' style="min-width:880px">
<div class="modal-header panel panel-warning">
<div class="panel-heading">
	<button type='button' class='close' ng-click="close()" aria-hidden='true'>&times;</button>				
	<h4 class="modal-title" >收费标准</h4>
</div>	
</div>
<div class="modal-body">
	<form class="form-horizontal" role="form">
		<div class="form-group">
			<label class="col-sm-2 control-label" >名称</label>
			<div class="col-sm-4">
				<input type="text" class="form-control" placeholder="请输入名称" ng-model="tempCriterion.name">
			</div>		
			<label class="col-sm-2 control-label" >免费时长/分</label>
			<div class="col-sm-4">
				<input type="text" class="form-control" placeholder="请输入免费时长/分" ng-model="tempCriterion.freemins">
			</div>
		</div>
		
		<div class="form-group">
            <label class="col-sm-2 control-label" >阶段1计费有效范围/分</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="阶段1范围/分" ng-model="tempCriterion.step1capacity">
            </div>
            <label class="col-sm-2 control-label" >阶段2计费有效范围/分</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="阶段2范围/分" ng-model="tempCriterion.step2capacity">
            </div>
        </div>
        
		<div class="form-group">
			<label class="col-sm-2 control-label" >计费单位 /分</label>
			<div class="col-sm-4">
				<input type="text" class="form-control" placeholder="即多少分钟为一个计费单位" ng-model="tempCriterion.timeoutpriceinterval">
			</div>
            <label class="col-sm-2 control-label" >阶段1小车计费 /元</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="小车第一阶段内单位计费标准" ng-model="tempCriterion.step1price">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" >阶段2小车计费/元</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="小车第二阶段内单位计费标准" ng-model="tempCriterion.step2price">
            </div>
            <label class="col-sm-2 control-label" >阶段1大车计费 /元</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="大车第一阶段内单位计费标准" ng-model="tempCriterion.step1pricelarge">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" >阶段2大车计费/元</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="大车第二阶段内单位计费标准" ng-model="tempCriterion.step2pricelarge">
            </div>
			<label class="col-sm-2 control-label" >最高收费/元</label>
			<div class="col-sm-4">
				<input type="text" class="form-control" placeholder="停车最高收费" ng-model="tempCriterion.maxexpense">
			</div>
		</div>
		
		<div class="form-group">
			<label class="col-sm-2 control-label" >夜晚开始时间</label>
			<div class="col-sm-4">
				<input type="text" class="form-control" placeholder="夜晚开始时间，HH:mm" ng-model="tempCriterion.nightstarttime">
			</div>
	
			<label class="col-sm-2 control-label" >夜晚结束时间</label>
			<div class="col-sm-4">
				<input type="text" class="form-control" placeholder="夜晚结束时间，HH:mm" ng-model="tempCriterion.nightendtime">
			</div>
		</div>
		
		<div class="form-group">
			<label class="col-sm-2 control-label" >是否按次收费</label>
			<div class="col-sm-4">
				<input type="checkbox"  placeholder="" ng-model="tempCriterion.isonetimeexpense">
			</div>
			<label class="col-sm-2 control-label" >价格(元)/每次</label>
			<div class="col-sm-4">
				<input type="text" class="form-control" placeholder="" ng-model="tempCriterion.onetimeexpense">
			</div>
		</div>
		<div class="form-group">
            <label class="col-sm-2 control-label" >收费说明</label>
            <div class="col-sm-10">
                <textarea rows=5  class="form-control"  ng-model="tempCriterion.explaination"></textarea>
            </div>
        </div>
        
			
		<div class="alert alert-info" ng-show="loading || submitted">
			<span  ng-show='loading' > <i class="fa fa-spinner"></i></span>
			<span ng-show='submitted'>{{result}}</span>
		</div>								

</form>
</div>

<div class="modal-footer">
	<button ng-click="close()" type="button" class="btn btn-default" data-dismiss="modal">取消</button>
	<button ng-click="submit()"  type="button" class="btn btn-primary">确定</button>
</div>
</div>

</script>	
					
	            </div>
            </div>
        </div>

    </section>
				
</div>
