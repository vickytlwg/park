<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.park.dao.ParkDAO">
  	<resultMap id="ParkMapper" type="Park">
		<id property="id" column="id" />
		<result property="name" column="name" />
		<result property="portCount" column="portCount"/>
		<result property="channelCount" column="channelCount"/>
		<result property="portLeftCount" column="portLeftCount" />
		<result property="charge" column="charge"/>
		<result property="charge1" column="charge1"/>
		<result property="charge2" column="charge2"/>
		<result property="status" column="status" />
		<result property="isFree" column="isFree"/>
		<result property="floor" column="floor"/>
		<result property="type" column="type"/>
		<result property="position" column="position" />
		<result property="longitude" column="longitude" />
		<result property="latitude" column="latitude" />
		<result property="alias" column="alias" />
		<result property="mapAddr" column="mapAddr" />
		<result property="date" column="date"/>
		<result property="isDeleted" column="isDeleted"/>
	</resultMap>    
	
	<resultMap id="ParkDetailMapper" type="com.park.model.ParkDetail">
		<id property="id" column="id" />
		<result property="name" column="name" />
		<result property="portCount" column="portCount"/>
		<result property="channelCount" column="channelCount"/>
		<result property="portLeftCount" column="portLeftCount" />
		<result property="charge" column="charge"/>
		<result property="charge1" column="charge1"/>
		<result property="charge2" column="charge2"/>
		<result property="status" column="status" />
		<result property="isFree" column="isFree"/>
		<result property="floor" column="floor"/>
		<result property="type" column="type"/>
		<result property="longitude" column="longitude" />
		<result property="latitude" column="latitude" />
		<result property="alias" column="alias" />
		<result property="mapAddr" column="mapAddr" />
		<result property="position" column="position" />
		<result property="date" column="date"/>
	</resultMap> 


	<select id="getParks" resultMap="ParkMapper">
		select * from park
	</select>
	
	<select id="nameToId" resultType="int">
		select id from park where name = #{param1}
	</select>
	
	<select id="getParkByName" resultMap="ParkMapper">
		select * from park where name = #{param1}
	</select>
	
	<select id="getParkById" resultMap="ParkMapper">
		select * from park where id = #{id}
	</select>
	
	<select id="getParkDetail" resultMap="ParkDetailMapper">
		select * from park limit #{low}, #{count}
	</select>
	
	<select id="getParkCount"  resultType="int">
		select count(*) from park
	</select>
	
	<insert id="insertPark" parameterType="Park" keyProperty="id">
		insert into park(name, portCount, portLeftCount, channelCount, charge, charge1, charge2, status, isFree, floor, type, longitude, latitude, alias, mapAddr, position, date, isDeleted) 
		values(#{name}, #{portCount}, #{channelCount}, #{portLeftCount}, #{charge}, #{charge1}, #{charge2}, #{status}, #{isFree}, #{floor}, #{type}, #{longitude}, #{latitude}, #{alias}, #{mapAddr}, #{position}, #{date}, #{isDeleted})
	</insert>
	
	<update id="updatePark" parameterType="Park" >
		update park set name = #{name}, portCount = #{portCount}, portLeftCount = #{portLeftCount}, channelCount = #{channelCount}, charge = #{charge}, charge1 = #{charge1},
		 charge2 = #{charge2}, status = #{status}, isFree = #{isFree}, floor = #{floor}, type = #{type}, longitude=#{longitude}, latitude=#{latitude}, alias=#{alias}, mapAddr=#{mapAddr}, position = #{position}, date = #{date}, isDeleted = #{isDeleted} where id = #{id}
	</update>
	
	<update id="updateLeftPortCount">
		update park set portLeftCount = #{portLeftCount} where id = #{id} 
	</update>
	
	<delete id="deletePark" parameterType="int">
		delete from park where id = #{id}
	</delete>
	     
          
</mapper>