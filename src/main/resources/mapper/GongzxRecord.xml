<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.park.dao.GongzxRecordDao">
	<resultMap id="GongzxRecordMapper" type="GongzxRecord">
		<id property="id" column="id" />
		<result property="carNumber" column="carNumber" />
		<result property="cardNumber" column="cardNumber"/>
		<result property="arriveTime" column="arriveTime"/>
		<result property="parkId" column="parkId" />
		<result property="parkName" column="parkName"/>
		<result property="stopType" column="stopType"/>
		<result property="shouldCharge" column="shouldCharge" />
		<result property="discount" column="discount"/>
		<result property="realPay" column="realPay"/>
		<result property="picturePath" column="picturePath"/>
		<result property="other" column="other"/>
	</resultMap> 
	<select id="gongcount" resultType="int">
		select count(*) from gongzxrecord
	</select>
	<select id="getPageByParkId" resultMap="GongzxRecordMapper">
		SELECT gongzxrecord.id,carNumber,cardNumber,arriveTime,parkId,parkName,stopType,shouldCharge,discount,realPay,picturePath,other 
		FROM gongzxrecord 
		LEFT JOIN park AS p ON parkId=p.id where parkId=#{parkId} order by id desc limit #{start}, #{count}
	</select>
	<select id="getByCarNumber" statementType="STATEMENT" resultMap="GongzxRecordMapper">
		SELECT gongzxrecord.id,carNumber,cardNumber,arriveTime,parkId,parkName,stopType,shouldCharge,discount,realPay,picturePath,other 
		FROM gongzxrecord LEFT JOIN park AS p ON parkId=p.id where carNumber like '%${carNumber}%' order by id desc limit 200
 	</select>
 	<select id="getByCarNumberAndPark" statementType="STATEMENT" resultMap="GongzxRecordMapper">
		SELECT gongzxrecord.id,carNumber,cardNumber,arriveTime,parkId,parkName,stopType,shouldCharge,discount,realPay,picturePath,other 
		FROM gongzxrecord 
		LEFT JOIN park AS p ON parkId=p.id where carNumber like '%${carNumber}%' and parkId= '${parkId}' order by id desc
 	</select>
 	<select id="getByParkName" statementType="STATEMENT" resultMap="GongzxRecordMapper">
		select * from gongzxrecord where parkName like '%${parkName}%' order by id desc limit 500
 	</select>
</mapper>